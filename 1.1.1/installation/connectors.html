<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Connectors activation · OpenCTI documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Introduction"/><meta name="docsearch:version" content="1.1.1"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Connectors activation · OpenCTI documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://opencti-platform.github.io/docs/"/><meta property="og:description" content="## Introduction"/><meta property="og:image" content="https://opencti-platform.github.io/docs/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://opencti-platform.github.io/docs/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/docs/img/logo.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/css/prism.css"/><link rel="stylesheet" href="/docs/css/main.css"/><script src="/docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/"><img class="logo" src="/docs/img/logo_header.png" alt="OpenCTI documentation"/><h2 class="headerTitleWithLogo">OpenCTI documentation</h2></a><a href="/docs/versions"><h3>1.1.1</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/1.1.1/getting-started/introduction" target="_self">Documentation</a></li><li class=""><a href="https://slack.luatix.org" target="_self">Help</a></li><li class=""><a href="https://www.github.com/OpenCTI-Platform/opencti" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Installation</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/1.1.1/getting-started/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/1.1.1/getting-started/architecture">Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/1.1.1/getting-started/requirements">Infrastructure requirements</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Installation</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/1.1.1/installation/docker">Using Docker</a></li><li class="navListItem"><a class="navItem" href="/docs/1.1.1/installation/manual">Manual deployment</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/1.1.1/installation/connectors">Enable connectors</a></li><li class="navListItem"><a class="navItem" href="/docs/1.1.1/development/installation">Development environment</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Usage</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/1.1.1/usage/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/1.1.1/usage/model">Data model</a></li><li class="navListItem"><a class="navItem" href="/docs/1.1.1/usage/reports-create">Create reports</a></li><li class="navListItem"><a class="navItem" href="/docs/1.1.1/usage/report-knowledge">Add knowledge to a report</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Reference</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/1.1.1/reference/relations">Relations between things</a></li><li class="navListItem"><a class="navItem" href="/docs/1.1.1/reference/inferences">Inferred relations</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Development</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/1.1.1/development/connectors">Connectors</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Connectors activation</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="introduction"></a><a href="#introduction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>
<p>Connectors are standalone processes that are independant of the rest of the platform. They are using RabbitMQ to push data to OpenCTI, through a dedicated queue for each instance of connector. Depending on your deployment, you can enable connectors by using the connectors Docker images or launch them manually.</p>
<h2><a class="anchor" aria-hidden="true" id="connector-configurations"></a><a href="#connector-configurations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Connector configurations</h2>
<p>All connectors have 2 mandatory configuration parameters, the <code>name</code> and the <code>confidence_level</code>. The <code>name</code> is the name of the instance of the connector. For instance, for the MISP connector, you can launch as many MISP connectors as you need, if you need to pull data from multiple MISP instances.</p>
<blockquote>
<p>The <code>name</code> of each instance of connector must be unique.</p>
</blockquote>
<blockquote>
<p>The <code>confidence_level</code> of the connector will be used to set the <code>confidence_level</code> of the relationships created by the connector. If a connector needs to create a relationship that already exists, it will check the current <code>confidence_level</code> and if it is lower than its own, it will update the relationship with the new information. If it is higher, it will do nothing and keep the existing relationship.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="docker-activation"></a><a href="#docker-activation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker activation</h2>
<p>You can either directly run the Docker image of connectors or add them to your current <code>docker-compose.yml</code> file.</p>
<h3><a class="anchor" aria-hidden="true" id="add-a-connector-to-your-deployment"></a><a href="#add-a-connector-to-your-deployment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add a connector to your deployment</h3>
<p>For instance, to enable the MISP connector, you can add a new service to your <code>docker-compose.yml</code> file:</p>
<pre><code class="hljs">  connector-misp:
    image: opencti/connector-misp:{RELEASE_VERSION}
    environment:
      - <span class="hljs-attribute">RABBITMQ_HOSTNAME</span>=localhost
      - <span class="hljs-attribute">RABBITMQ_PORT</span>=5672 
      - <span class="hljs-attribute">RABBITMQ_USERNAME</span>=guest
      - <span class="hljs-attribute">RABBITMQ_PASSWORD</span>=guest
      - <span class="hljs-attribute">MISP_NAME</span>=MISP\ Circle
      - <span class="hljs-attribute">MISP_CONFIDENCE_LEVEL</span>=3
      - <span class="hljs-attribute">MISP_URL</span>=http://localhost
      - <span class="hljs-attribute">MISP_KEY</span>=ChangeMe
      - <span class="hljs-attribute">MISP_TAG</span>=OpenCTI:\ Import
      - <span class="hljs-attribute">MISP_UNTAG_EVENT</span>=<span class="hljs-literal">true</span>
      - <span class="hljs-attribute">MISP_IMPORTED_TAG</span>=OpenCTI:\ Imported
      - <span class="hljs-attribute">MISP_INTERVAL</span>=1 # Minutes
      - <span class="hljs-attribute">MISP_LOG_LEVEL</span>=info
    restart: always
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="launch-a-standalone-connector"></a><a href="#launch-a-standalone-connector" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Launch a standalone connector</h3>
<p>To launch standalone connector, you can use the <code>docker-compose.yml</code> file of the connector itself. Just download the <a href="https://github.com/OpenCTI-Platform/connectors/archive/{RELEASE_VERSION}.zip">release</a> and start the connector:</p>
<pre><code class="hljs">$ wget https:<span class="hljs-string">//github.com/OpenCTI-Platform/connectors/archive/</span>{RELEASE_VERSION}<span class="hljs-string">.zip</span>
$ unzip {RELEASE_VERSION}<span class="hljs-string">.zip</span>
$ <span class="hljs-keyword">cd</span> connectors-{RELEASE_VERSION}<span class="hljs-string">/misp/</span>
</code></pre>
<p>Change the configuration in the <code>docker-compose.yml</code> according to the parameters of the platform and of the targeted service. RabbitMQ credentials are the only parameters that the connector need to send data to OpenCTI. Then launch the connector:</p>
<pre><code class="hljs"><span class="hljs-variable">$ </span>docker-compose up
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="manual-activation"></a><a href="#manual-activation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Manual activation</h2>
<p>If you want to manually launch connector, you just have to install Python 3 and pip3 for dependencies:</p>
<pre><code class="hljs">$ apt install <span class="hljs-keyword">python3</span> <span class="hljs-keyword">python3</span>-pip
</code></pre>
<p>Download the <a href="https://github.com/OpenCTI-Platform/connectors/archive/{RELEASE_VERSION}.zip">release</a> of the connectors:</p>
<pre><code class="hljs">$ wget https:<span class="hljs-string">//github.com/OpenCTI-Platform/connectors/archive/</span>{RELEASE_VERSION}<span class="hljs-string">.zip</span>
$ unzip {RELEASE_VERSION}<span class="hljs-string">.zip</span>
$ <span class="hljs-keyword">cd</span> connectors-{RELEASE_VERSION}<span class="hljs-string">/misp/src/</span>
</code></pre>
<p>Install dependencies and initialize the configuration:</p>
<pre><code class="hljs">$ pip3 install -r requirements<span class="hljs-selector-class">.txt</span>
$ cp config<span class="hljs-selector-class">.yml</span><span class="hljs-selector-class">.sample</span> config<span class="hljs-selector-class">.yml</span>
</code></pre>
<p>Change the <code>config.yml</code> content according to the parameters of the platform and of the targeted service and launch the connector:</p>
<pre><code class="hljs">$ <span class="hljs-keyword">python3</span> misp.<span class="hljs-keyword">py</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="connectors-status"></a><a href="#connectors-status" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Connectors status</h2>
<p>The connector status can be displayed in the dedicated section. You will be able to see the statistics of the RabbitMQ queue of the connector:</p>
<p><img src="/docs/assets/installation/connectors_status.png" alt="Connectors status" title="Connectors status"></p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 7/30/2019 by Julien Richard</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/1.1.1/installation/manual"><span class="arrow-prev">← </span><span>Manual deployment</span></a><a class="docs-next button" href="/docs/1.1.1/development/installation"><span>Development environment</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#introduction">Introduction</a></li><li><a href="#connector-configurations">Connector configurations</a></li><li><a href="#docker-activation">Docker activation</a><ul class="toc-headings"><li><a href="#add-a-connector-to-your-deployment">Add a connector to your deployment</a></li><li><a href="#launch-a-standalone-connector">Launch a standalone connector</a></li></ul></li><li><a href="#manual-activation">Manual activation</a></li><li><a href="#connectors-status">Connectors status</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/docs/" class="nav-home"><img src="/docs/img/logo.png" alt="OpenCTI documentation" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/installation/docker">Install using Docker</a><a href="/docs/usage/overview">Usage introduction</a><a href="/docs/development/installation">Development environment</a></div><div><h5>Community</h5><a href="https://demo.opencti.io">Demonstration</a><a href="http://stackoverflow.com/questions/tagged/OpenCTI" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://slack.luatix.org/">Slack</a><a href="https://twitter.com/LuatixHQ" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="https://www.luatix.org/en/blog/">Blog</a><a href="https://github.com/OpenCTI-Platform">GitHub</a><a class="github-button" href="https://github.com/OpenCTI-Platform/opencti" data-icon="octicon-star" data-count-href="/OpenCTI-Platform/opencti/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 OpenCTI</section></footer></div></body></html>